@page "/PCP/PCP_ConsultaAvviso.asp"
@inject eProcurementNext.Session.ISession session;
@using eProcurementNext.CommonModule;
@using static eProcurementNext.Razor.Pages.CTL_LIBRARY.functions.securityModel;
@using static eProcurementNext.CommonModule.Basic;
@using static eProcurementNext.Session.SessionMiddleware
@model eProcurementNext.Razor.Pages.PCP.PCP_ConsultaAvviso
@{
    LoadSession(HttpContext, session);
    EprocResponse response = new();

    var ID = GetParamURL(Request.QueryString.ToString(), "ID"); //idRow della Services_Integration_Request
    var idRic = GetParamURL(Request.QueryString.ToString(), "IDRIC"); //idRichiesta della Services_Integration_Request
    var operation = GetParamURL(Request.QueryString.ToString(), "OPERATION");

    validate("ID", ID, TIPO_PARAMETRO_INT, SOTTO_TIPO_VUOTO, "", 0, HttpContext, session);
    validate("IDRIC", idRic, TIPO_PARAMETRO_INT, SOTTO_TIPO_VUOTO, "", 0, HttpContext, session);

    var idRow = CInt(ID);
    var idGara = CInt(idRic);

    var res = Model.consultaAvviso(idRow, idGara, operation);

    var esito = res;

    @Html.Raw(esito)
}